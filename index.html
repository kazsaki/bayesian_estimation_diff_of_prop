<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Bayesian Estimation for the Diff of Proportions</title>
  <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script type="text/javascript" src="beat_2g.js"></script>
  <link rel="stylesheet" href="beat_2g.css" type="text/css">
</head>

  <header id="header">
    <div id="title_description">
      <h1>Bayesian Estimation for the Difference of Proportions</h1>
    </div>
  </header>

  <div id="abstract">
    <p>On this page, you can make a Bayesian Estimation of the Difference in Proportions.
      Bayesian method estimates the difference in proportion between groups and shows the probability distribution.
      You can see the mean difference, the 95%HDI(Highest Density Interval) from this distribution.
      And you can also see the probability that the difference between groups is > 0 or < 0.</p>
  </div>

  <div id="obs">
    <h3>Enter your A/B testing results, and Click to estimate!</h3>
    No data is sent anywhere, works only JavaScript.</p>
    <form id="obs_table" name="obs_form"
      oninput="obs_A.value = Math.round(parseFloat(numer_A.value) / parseFloat(denom_A.value)*100*1000)/1000;
      obs_B.value= Math.round(parseFloat(numer_B.value) / parseFloat(denom_B.value)*100*1000)/1000">
      <table initialTab="css">
        <tr>
          <th></th> <th>Group A</th> <th>Group B</th>
        </tr>
        <tr>
          <td>denom(e.g. Pageviews)</td>
          <td><input type="Number" id="denom_A" autocomplete="off" required style="text-align: right;" step="0.9"/></td>
          <td><input type="Number" id="denom_B" autocomplete="off" required style="text-align: right;" step="0.9"/></td>
        </tr>
        <tr>
          <td>numer(e.g. Clicks)</td>
          <td><input type="Number" id="numer_A" autocomplete="off" required style="text-align: right;" step="0.9"/></td>
          <td><input type="Number" id="numer_B" autocomplete="off" required style="text-align: right;" step="0.9"/></td>
        </tr>
        <tr>
          <td>observed rate (%)</td>
          <td align="right"><output form="obs_table" name="obs_A"></output></td>
          <td align="right"><output form="obs_table" name="obs_B"></output></td>
        </tr>
      </table>

      <p>Number of sampling times <input type="Number" id="samples" autocomplete="off" value="200000" style="text-align: right;"/>
        <span class="num_samples">Can be adjusted to your preference</span></p>
    </form>
  </div>

  <div>
    <button onclick="calc_BE();" class="c_button">Click to estimate</button>
    <input type="reset" form="obs_table" value="reset" class="r_button">
  </div>




<br>


  <div id='myDiv_posterior'></div>
  <div id="result_mean_A" class="hoge"></div>
  <div id="result_mean_B"></div>

  <div id='explain_posterior'>
    <p>This is the posterior distribution of each groups and its means. If the number of observation data is large enough, the mean of the posterior distribution and the observation data will almost match. And the posterior distribution tends to be sharp(This is also an indication of the certainty of the estimation). If the number of observation data is small, the mean of the posterior distribution and the observation data will deviate. And the posterior distribution has a wide hem(This is also a sign of the uncertainty of the estimation).</p>
  </div>


  <div id='myDiv_AB'></div>
  <div id="result_mean_delta_AB" class="hoge"></div>
  <div id="result_hdi95"></div>
  <div id="result_pA_over_pB"></div>
  <div id='explain_pA_over_pB'>
    <p>This figure shows the probability distribution of the difference in proportions between groups. If the 95% HDI does not contain 0, it means that there is a credible difference between groups. <b>The bold part shows the probability that the proportion of group A is greater than that of group B. You can know the probability that the difference between groups is > 0(or < 0), this is the advantage of Bayesian estimation.</b> Even if the 95% HDI contains 0, this value can be used to judge.</p>
    <p>If this value is close to 50%, it's uncertain whether there's a difference. When the value is close to 100% (or 0%), the probability of the difference increases. The closer this value is to 100% (or 0%), the more likely there's a difference. There's no rule like p-value for judging. For example, when this value exceeds 80%(or below 20%), you can consider 80% to be probable and judge there's a difference. Or you may consider 80% to be uncertain and judge there's no difference, too. I'm afraid that you do not stick only to the estimation results here, but also combine related peripheral information and make judgments from a comprehensive perspective.</p>

  </div>













</body>
<footer>
  Coded by kazsaki 2022<br>
  This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License</a>.
</footer>

</html>
